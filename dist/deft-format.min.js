/*!
 * DeftFormat.js - v1.0.2
 * https://github.com/deft/deft-angular-format
 */
function Formatter(n){this.format=function(r){return t(r,n)};var t=function(n,e){e=" "+e;var o=new RegExp(/[^\\]([\d*]+)([SD])/),a=o.exec(e),c=e.search(o)+1,p=c?e.substring(1,c):e.substring(1);if(p=r(p),n=u(n,p),a){var f=i(a[1],a[2],n);p+=f.output,f.done&&(p+=t(f.remainingInput,e.substring(c-1).replace(a[0],"")))}return p},r=function(n){return n.replace(/\\/g,"")},u=function(n,t){if(!t)return n;var r="^"+e(t[0]);return t=t.substring(1),_.forEach(t,function(n){r+=e(n)+"?"}),n.replace(new RegExp(r),"")},e=function(n){return _.contains(["\\","-","]"],n)&&(n="\\"+n),"["+n+"]"},i=function(n,t,r){var u={remainingInput:r,output:"",done:!1};return _.forEach(r,function(r){return u.output.length==n?u.done=!0:(u.remainingInput=u.remainingInput.substring(1),void(" "!==r&&(parseInt(r)+""===r?"D"==t&&(u.output+=r):"S"==t&&(u.output+=r))))}),u}}
angular.module("deft.format",[]).factory("DeftFormatter",function(){return{get:function(t){return new Formatter(t)}}}).directive("deftFormat",["DeftFormatter",function(t){return{restrict:"A",require:"?ngModel",scope:{format:"@deftFormat"},link:function(r,e,n,o){if(o){var a=t.get(r.format);o.$parsers.unshift(function(t){return a.format(t)}),e.blur(function(){var t=a.format(e.val());e.val(t),o.$setViewValue(t)})}}}}]);
